# AI对话功能使用示例

## 一、使用对话模版

### 场景
当你打开一只股票，但还没有任何对话记录时。

### 操作步骤
1. 在自选股列表中选择一只股票（如：688385 复旦微电）
2. 右侧对话区域显示"暂无对话记录"和"选择对话模版"按钮
3. 点击"选择对话模版"按钮
4. 在弹出的模版列表中选择一个模版（如："技术指标分析"）
5. 模版内容自动填充到输入框
6. 点击"发送"按钮即可开始对话

### 前置条件
需要先在"对话模版"页面创建一些常用模版，例如：
- **模版名称**：技术指标分析
- **模版内容**：
  ```
  帮我分析一下 日K__30天_MACD&RSI 的技术形态，判断当前是否有买入或卖出信号。
  ```

---

## 二、查看变量帮助

### 场景
想了解如何在对话中使用变量来获取K线数据。

### 操作步骤
1. 选择任意股票
2. 点击对话框标题栏右侧的"?"按钮（在"清除"按钮左边）
3. 弹出"可用变量说明"窗口
4. 查看变量格式、参数说明和使用示例
5. 点击窗口外部或"×"关闭

### 变量格式
```
K线类型_股票_窗口_指标
```

---

## 三、使用变量进行数据分析

### 示例1：基础K线分析

**输入**：
```
分析一下 日K 的走势
```

**解析后**：
系统自动获取当前股票最近60天的日K线数据（开盘、收盘、最高、最低、成交量），并提供给AI分析。

---

### 示例2：指定窗口和指标

**输入**：
```
帮我看看 日K__30天_MACD 是否有金叉信号
```

**解析后**：
- K线类型：日K
- 股票：当前选中的股票
- 窗口：30天
- 指标：MACD

系统获取最近30天的日K线数据和MACD指标，格式化为表格后发送给AI。

---

### 示例3：多指标综合分析

**输入**：
```
综合分析 日K__60天_MACD&EMA&RSI，给出操作建议
```

**解析后**：
- K线类型：日K
- 股票：当前选中的股票
- 窗口：60天
- 指标：MACD、EMA、RSI（三个指标）

系统获取60天的K线数据以及三个技术指标，全部提供给AI进行综合分析。

---

### 示例4：跨股票对比

**输入**：
```
对比一下 日K_688385_30天_MACD 和 日K_000001_30天_MACD，看看哪个技术形态更好
```

**解析后**：
- 变量1：688385（复旦微电）的30天日K线+MACD
- 变量2：000001（上证指数）的30天日K线+MACD

系统分别获取两只股票的数据，AI可以进行对比分析。

---

### 示例5：长短期趋势对比

**输入**：
```
对比 日K__30天_MACD 和 周K__360天_MACD，判断长短期趋势是否一致
```

**解析后**：
- 变量1：30天日K线+MACD（短期）
- 变量2：360天周K线+MACD（长期）

系统提供不同时间周期的数据，AI可以分析趋势一致性。

---

### 示例6：省略参数的简化写法

**输入**：
```
周K 的走势如何？
```

**解析后**：
- K线类型：周K
- 股票：当前股票
- 窗口：360天（默认）
- 指标：无

---

## 四、实际对话案例

### 案例1：日内交易策略

**场景**：用户想了解当天的1分钟走势

**对话**：
```
用户：分析一下 1分钟K 的走势，判断是否适合做T

AI：根据最近2天的1分钟K线数据分析...
   [AI提供详细的盘口分析和做T建议]
```

---

### 案例2：波段交易机会

**场景**：用户寻找波段交易机会

**对话**：
```
用户：帮我看看 日K__60天_MACD&RSI，有没有波段买入机会？

AI：从60天的日K线和技术指标来看...
   MACD方面：...
   RSI方面：...
   综合判断：...
```

---

### 案例3：跟随指数策略

**场景**：用户想对比个股与大盘的表现

**对话**：
```
用户：对比一下 日K_688385 和 日K_000001，看看是否跑赢大盘

AI：对比688385（复旦微电）和000001（上证指数）...
   涨跌幅对比：...
   走势相关性：...
   结论：...
```

---

## 五、使用技巧

### 1. 数据更新
使用变量前，先点击"更新数据"按钮确保数据是最新的。

### 2. 合理的窗口大小
- **短线交易**：日K 30天，1分钟K 2天
- **波段交易**：日K 60天，周K 360天
- **长期投资**：周K 720天

### 3. 指标组合建议
- **趋势跟踪**：MACD + EMA
- **超买超卖**：RSI
- **全面分析**：MACD + EMA + RSI

### 4. 对话模版建议
创建不同场景的模版：
- 日内交易模版
- 波段交易模版
- 长期投资模版
- 风险评估模版
- 对比分析模版

---

## 六、注意事项

1. **指标支持限制**
   - 目前只有日K线支持技术指标（MACD、EMA、RSI）
   - 周K线和1分钟K线只提供基础K线数据

2. **数据量控制**
   - 窗口不宜过大，建议不超过：
     - 日K：120天
     - 周K：720天（约3年）
     - 1分钟K：2880分钟（2天）

3. **变量格式规范**
   - 下划线`_`作为分隔符
   - 参数顺序固定：K线类型_股票_窗口_指标
   - 可以省略参数但要保持下划线（如：`日K__30天`）

4. **性能考虑**
   - 一次对话中不要使用过多变量
   - 建议每次不超过3个变量

---

*本文档随系统升级持续更新*
